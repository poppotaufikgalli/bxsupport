{"version":3,"file":"index-3a356d61.js","sources":["../../../../composables/useFcm.ts","../../../../pages/index.vue"],"sourcesContent":["import { \n  MessagePayload, \n  getToken as _getToken,\n  onMessage as _onMessage \n} from \"firebase/messaging\";\nimport { useNuxtApp } from \"#imports\";\n\nexport default function () {\n  const config = useRuntimeConfig()\n  const { $messaging } = useNuxtApp();\n\n  async function getToken(): Promise<string> {\n    return $messaging && _getToken($messaging, {\n       vapidKey: config.vapidKey,\n    })\n  }\n\n  function onMessage(cb: (payload: MessagePayload) => void) {\n    $messaging && _onMessage($messaging, cb);\n  }\n\n  return { getToken, onMessage };\n}\n","<template>\n  <div class=\"\">\n    <h3 class=\"text-xl font-bold \">BisaXirim Support</h3>\n    <p class=\"text-sm\">Available Soon</p>\n    <pre v-if=\"msg\"><span>Message :</span> {{ msg }}</pre>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\n//import { getToken } from 'firebase/messaging'\ndefinePageMeta({ auth: false })\nconst { data, status, getCsrfToken, getProviders } = useSession()\n\nconst { getToken, onMessage, sendMessage } = useFcm()\nconst msg = ref(\"\")\n\nconst providers = await getProviders()\nconst csrfToken = await getCsrfToken()\nconst fcmToken = await getToken()\n\nonMessage((payload) => msg.value = payload);\n\n</script>\n\n<style scoped>\npre {\n  @apply bg-gray-800 text-white p-3 my-3 rounded shadow overflow-x-auto;\n}\n\npre span {\n  @apply text-green-400;\n}\n</style>\n"],"names":["getToken","_getToken","onMessage","_onMessage","_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;AAOA,SAAA,SAAA;AACE,QAAA,SAAA;AACA,QAAA,EAAA,eAAA;AAEA,iBAAAA,aAAA;AACE,WAAA,cAAAC,SAAA,YAAA;AAAA,MAA2C,UAAA,OAAA;AAAA,IACvB,CAAA;AAAA,EACnB;AAGH,WAAAC,YAAA,IAAA;AACE,kBAAAC,UAAA,YAAA,EAAA;AAAA,EAAuC;AAGzC,SAAA,EAAAH,UAAAA,YAAAE,WAAAA;AACF;;;;;;ACXA,UAAA,EAAA,MAAA,QAAA,cAAA,aAAA,IAAA;AAEA,UAAA,EAAA,UAAAF,WAAA,WAAAE,YAAA,YAAA,IAAA,OAAA;AACA,UAAA,MAAA,IAAA,EAAA;AAEA,IAAA,CAAA,QAAA,SAAA,IAAAE,iBAAA,MAAA,cAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AACA,IAAA,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,cAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AACA,IAAA,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAAJ,WAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AAEA,IAAAE,WAAA,CAAA,YAAA,IAAA,QAAA,OAAA;;;;;;;;;;;;;;;;;;;;"}